(this["webpackJsonpspace-machine"]=this["webpackJsonpspace-machine"]||[]).push([[0],{22:function(e,t,n){e.exports=n(34)},27:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(17),i=n.n(r),c=(n(27),n(4)),l=n(5),u=Object(l.a)({Bounder:{backgroundImage:"url(https://media.wired.com/photos/5a593a7ff11e325008172bc2/master/pass/pulsar-831502910.jpg)",width:"100vw",height:"100vh",display:"flex",fontSize:"calc(20px + 2vmin)",color:"white",position:"absolute",top:"0px",left:"0px",userSelect:"none",zIndex:"-1",overflow:"hidden"},ModuleViewBounder:{minWidth:"60vw",height:"100vh",display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",zIndex:0,overflowX:"hidden",overflowY:"scroll","&::-webkit-scrollbar":{width:"0px"}}}),d="#282c34",s="#0000009e",m="#00347d",p="#001b40",f="#0000009e",h="black",g="#c0c0c038",w="#37538a",b="white",v="#007ab3",I="white",O="black",D="#cc00006e",C="#cc0000",y="red",x="#3b3b3b94",E={width:"400px",toggleWidth:"2vmin",item:"9vmin"},j={iconGrid:"12vmin",gutterGrid:"6vmin",icon:"9vmin",bigIcon:"27vmin",bigIconWidth:"35vmin",bigIconHeight:"60vmin"},N={large:"calc(25px + 2.8vmin)",medium:"calc(20px + 2.4vmin)",small:"calc(12px + 1.2vmin)",xsmall:"calc(8px + 1vmin)"},T={size:"3vmin",borderRadius:"1.5vmin"},S=Object(l.a)({DrawerBounder:{width:"0px",height:"100vh",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",color:"white",position:"absolute",top:"0px",right:"0px",userSelect:"none",zIndex:10},Drawer:{backgroundColor:s,height:"100vh",width:E.width,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"flex-start",position:"absolute",top:"0px",right:"0px"},DrawerHeader:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"inherit",overflowX:"scroll",overflowY:"hidden","&::-webkit-scrollbar":{height:"3px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"white"}},DrawerHeaderItem:{fontSize:N.medium,padding:"1vmin 1.5vmin",color:b,textDecoration:"none",whiteSpace:"nowrap","&:hover":{cursor:"pointer"}},ItemRouter:{width:E.width,display:"flex",flexFlow:"row wrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",height:"calc(100% - 60px)",overflowY:"scroll","&::-webkit-scrollbar":{width:"0px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"white"}},DrawerItem:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",borderRadius:"10px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",margin:"3vmin"},DrawerIcon:{backgroundColor:d,borderColor:d,borderStyle:"solid",width:E.item,height:E.item,borderRadius:"1.5vmin",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",marginBottom:"1.5vmin","&:hover":{cursor:"pointer",borderColor:"white"}},DrawerItemText:{fontSize:N.small},Toggle:{backgroundColor:m,width:E.toggleWidth,zIndex:10,height:"100%",display:"flex",alignItems:"center",justifyContent:"center","&:hover":{cursor:"pointer"},position:"absolute",top:"0px",right:E.width},ToggleLine:{backgroundColor:p,borderRadius:"4px",width:"0.75vmin",height:"80px"}}),M=n(9);var k=function(e){var t=e.className,n=e.text,o=e.onClick,r={color:e.selectedRoute===n?v:b};return a.a.createElement("div",{className:t,onClick:o,style:r},n)},R="VALUE",A=[["gain","gain","GAIN"],["filter","filter","AUTOFILTER"],["kompressor","komp","KOMPRESSOR"],["signal delay","delay","SIGNAL_DELAY"],["stereo panner","pan","STEREO_PANNER"]],P=[["file","file","MEDIA_ELEMENT"],["stream","stream","LINE_IN"],["oscillator","osc","OSCILLATOR"],["constant","const","CONSTANT"]],F=[["container","cntnt","CONTAINER"],["output","out","OUTPUT"]];function U(e,t){for(var n=[],o=e;o<t;o++)n.push(o);return n}function _(e,t){return Math.min(t[1],Math.max(t[0],e))}var H=0;var L=function(e){var t=e.fullName,n=e.id,o=e.moduleType,r=S();return a.a.createElement("div",{className:r.DrawerItem},a.a.createElement("div",{className:r.DrawerIcon,draggable:!0,onDragStart:function(e){e.dataTransfer.setData("id","".concat(n," ").concat(H)),e.dataTransfer.setData("moduleType",o),e.dataTransfer.setData("name",n),window.setFillIsExpanded(!0),H+=1},onDragEnd:function(){window.setFillIsExpanded(!1)}}),a.a.createElement("div",{className:r.DrawerItemText},t))};var z=function(e){var t=e.moduleData;return a.a.createElement(o.Fragment,null,t.map((function(e,t){return a.a.createElement(L,{fullName:e[0],id:e[1],moduleType:e[2],key:t})})))},B=E.width;var W=function(){var e=S(),t=Object(o.useState)(!0),n=Object(c.a)(t,2),r=n[0],i=n[1],l=Object(o.useState)(B),u=Object(c.a)(l,2),d=u[0],s=u[1],m=Object(M.b)({transform:r?"translate(0px, 0px)":"translate(".concat(d,"px, 0px)"),config:{tension:220,clamp:!0}}),p=Object(o.useState)("sources"),f=Object(c.a)(p,2),h=f[0],g=f[1],w=Object(o.useRef)(null),b=Object(o.useRef)(null),v=Object(o.useRef)(null),I=Object(o.useRef)(null),O=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),D=!1;return a.a.createElement(M.a.div,{className:e.DrawerBounder,style:m},a.a.createElement("div",{className:e.Toggle,ref:b,onPointerDown:function(e){var t;r&&e.shiftKey?(D=!0,null===(t=b.current)||void 0===t||t.setPointerCapture(e.pointerId)):i(!r)},onPointerMove:function(e){D&&(B="".concat(_(O-e.clientX,[150,700]),"px"),w.current&&(w.current.style.width=B),v.current&&(v.current.style.width=B),I.current&&(I.current.style.width=B),b.current&&(b.current.style.right=B))},onPointerUp:function(e){var t;D&&(D=!1,s(B),null===(t=b.current)||void 0===t||t.releasePointerCapture(e.pointerId))}},a.a.createElement("div",{className:e.ToggleLine,onClick:function(){i(!r)}})),a.a.createElement("div",{className:e.Drawer,ref:w},a.a.createElement("div",{className:e.DrawerHeader,ref:v,onWheel:function(e){v&&v.current&&(v.current.scrollLeft+=e.deltaY)}},a.a.createElement(k,{className:e.DrawerHeaderItem,text:"sources",onClick:function(){g("sources")},selectedRoute:h}),a.a.createElement(k,{className:e.DrawerHeaderItem,text:"effects",onClick:function(){g("effects")},selectedRoute:h}),a.a.createElement(k,{className:e.DrawerHeaderItem,text:"utility",onClick:function(){g("utility")},selectedRoute:h})),a.a.createElement("div",{className:e.ItemRouter,ref:I},"sources"===h?a.a.createElement(z,{moduleData:P}):"effects"===h?a.a.createElement(z,{moduleData:A}):"utility"===h?a.a.createElement(z,{moduleData:F}):null)))},G=Object(l.a)({FillBounder:{backgroundColor:g,display:"flex",flexDirection:"column",margin:"5vmin",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderRadius:"2vmin"},FillHeaderBounder:{display:"flex",justifyContent:"space-between"},FillHeader:{borderColor:"white",borderStyle:"none none solid none",padding:"1vmin",marginLeft:"2vmin","&:hover":{cursor:"pointer"}},Fill:{display:"grid",minWidth:j.iconGrid,minHeight:j.iconGrid,padding:"4vmin",zIndex:1,rowGap:j.gutterGrid,columnGap:j.gutterGrid},ArcherContainer:{width:"100%",height:"100%",zIndex:0,display:"grid"},Icon:{backgroundColor:w,borderRadius:"1.5vmin",borderStyle:"none",borderColor:"white",whiteSpace:"wrap",fontSize:N.medium,padding:"1vmin",display:"flex",flexFlow:"column nowrap",alignItems:"flex-end",justifyContent:"space-between",overflow:"hidden",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)","&:hover":{cursor:"pointer",borderStyle:"solid"},zIndex:2},ArcherElement:{zIndex:1,display:"grid",gridTemplateRows:"10px auto 10px",gridTemplateColumns:"10px auto 10px",padding:"1vmin"},IconName:{fontSize:N.small,"&:hover":{cursor:"pointer"}},IconConnector:{backgroundColor:y,width:T.size,height:T.size,borderRadius:T.borderRadius,boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",borderStyle:"none",borderColor:"white","&:hover":{cursor:"pointer",borderStyle:"solid"}}}),q=n(7),Y=function(e,t,n,o,a,r,i,c){return{type:"ADD_MODULE",moduleType:n,id:e,name:t,row:a,col:r,parentID:o,connectionInputs:i,connectionOutputs:c}},K=function(e,t,n){return{type:"MOVE_MODULE",id:e,newRow:t,newCol:n}},V=function(e,t,n,o,a,r,i){return{type:"ADD_CONNECTION",fromID:e,toID:t,param:n,outputIndex:o,inputIndex:a,containerOutputChildID:r,containerInputChildID:i}},X=function(e,t,n){return{type:"REMOVE_CONNECTION",fromID:e,toID:t,connectionID:n}},Q=n(15),J=Object(l.a)({LeftDrawer:{backgroundColor:f,height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",fontSize:"calc(20px + 2vmin)",color:"white",userSelect:"none",overflow:"hidden",whiteSpace:"nowrap",zIndex:"20"},TopItems:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",width:"100%",maxHeight:"50%",overflowX:"hidden",overflowY:"scroll","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"white"}},HeaderScrollBounder:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",borderColor:"white",borderStyle:"none none solid none","&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"white"}},DrawerHeader:{width:"100%",height:"1em",whiteSpace:"nowrap",backgroundColor:"transparent",color:"white",fontSize:N.large,padding:"1vmin 0vmin",borderWidth:"1px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",justifyText:"center",resize:"none",overflow:"hidden","&:hover":{cursor:"pointer"}},MenuHeader:{fontSize:N.medium,borderStyle:"none none solid none",margin:"1vmin",width:"90%"},Connection:{fontSize:N.small,backgroundColor:g,margin:".5vmin 3vmin",borderRadius:"1vmin",borderColor:"transparent",borderStyle:"solid",minWidth:"30%",padding:"1vmin",display:"flex",justifyContent:"center",alignItems:"center","&:hover":{cursor:"pointer",borderColor:D},boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"},ControlBounder:{display:"flex",flexFlow:"row wrap",width:"100%",justifyContent:"space-around",alignItems:"center",padding:"1vmin",fontSize:N.small},ControlMenu:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center"},BottomItems:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",width:"100%",maxHeight:"50%",overflowX:"hidden",overflowY:"scroll","&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"white"}}}),$=Object(l.a)({ControlTypeSelect:{minWidth:"9vmin",maxWidth:"5em",margin:"1vmin",fontSize:N.small},ControlInput:{minWidth:"9vmin",maxWidth:"5em",margin:"1vmin",fontSize:N.small},ControlMenu:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center"}});var Z=function(e){var t=e.controlID,n=e.setFunc,o=e.reRenderIcon,r=$();return a.a.createElement("div",{className:r.ControlMenu},a.a.createElement("label",{style:{minWidth:"50%"},htmlFor:window.highlightedID+t},a.a.createElement(ve,{style:{borderColor:D}},"choose file")),a.a.createElement("input",{style:{width:0,height:0,opacity:0},type:"file",id:window.highlightedID+t,onChange:function(e){var t=e.target.files[0];n(URL.createObjectURL(t)),window.audioTags[window.highlightedID].srcName=t.name,window.reRenderAudioTags(),o()}}),a.a.createElement("p",{style:{fontSize:N.xsmall,textAlign:"center",whiteSpace:"normal",justifyContent:"center",width:"100%",overflowWrap:"break-word",wordWrap:"break-word",hyphens:"auto"}},window.audioTags[window.highlightedID].srcName))};var ee=function(e){var t=e.setFunc,n=e.audioModule,r=e.value,i=e.selectedModule,c=e.reRenderIcon,l=$(),u=n.audioNode;return a.a.createElement(o.Fragment,null,a.a.createElement("label",{htmlFor:"type"},"choose type"),a.a.createElement("select",{className:l.ControlTypeSelect,name:"type",id:"type",onChange:function(e){t(e.target.value),c()},value:r||u.type},n.typeTypes.map((function(e){return a.a.createElement("option",{value:e,key:i.id+e},e)}))))};var te=function(e){var t=e.controlID,n=e.value,r=e.audioModule,i=e.range,c=e.paramID,l=e.setFunc,u=e.reRenderIcon,d=r.audioNode,s=$();return a.a.createElement(o.Fragment,null,a.a.createElement("div",null,t),a.a.createElement("input",{className:s.ControlInput,type:"number",value:"number"===typeof n?n:d[c].value,min:i?i[0]:void 0,max:i?i[1]:void 0,step:i&&i[2]?i[2]:void 0,onChange:function(e){l(e.target.value),u()}}))};var ne=function(e){var t=e.setFunc,n=e.controlID;return a.a.createElement(ve,{style:{borderColor:D,width:"50%"},onClick:function(){t("")}},n)};var oe=function(e){var t=e.controlID,n=e.setFunc;return a.a.createElement(He,{text:t,initState:!1,onSwitch:function(e){n(e?"true":"false")}})};var ae=function(e){var t=e.audioModule,n=e.selectedModule,r=e.reRenderIcon,i=J(),l=Object(o.useState)(!1),u=Object(c.a)(l,2),d=u[0],s=u[1];return a.a.createElement("div",{className:i.ControlMenu},a.a.createElement(ve,{style:{width:"70%",backgroundColor:x},onClick:function(e){e.stopPropagation(),s(!d)}},"controls"),d&&t?Object.keys(t.controlData).map((function(e,o){var c=t.controlData[e],l=c.controlType,u=c.paramID,d=c.value,s=c.range,m=t.controlSetFuncs[e];return a.a.createElement("div",{className:i.ControlBounder,key:n.id+o},l===R?a.a.createElement(te,{controlID:e,value:d,audioModule:t,range:s,paramID:u,setFunc:m,reRenderIcon:r}):"BUTTON"===l?a.a.createElement(ne,{setFunc:m,controlID:e}):"TYPE"===l?a.a.createElement(ee,{setFunc:m,audioModule:t,value:d,selectedModule:n,reRenderIcon:r}):"FILE"===l?a.a.createElement(Z,{controlID:e,setFunc:m,reRenderIcon:r}):"SWITCH"===l?a.a.createElement(oe,{controlID:e,setFunc:m}):null)})):null)};function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;0===n.length?e.audioNode.connect(t.audioNode,o,a):t.audioNode[n]?e.audioNode.connect(t.audioNode[n],o):alert("param does not exist")}function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3?arguments[3]:void 0;0===n.length?"number"===typeof o?e.audioNode.disconnect(t.audioNode,o):e.audioNode.disconnect(t.audioNode):t.audioNode[n]?"number"===typeof o?e.audioNode.disconnect(t.audioNode[n],o):e.audioNode.disconnect(t.audioNode[n]):alert("param does not exist")}var ce=function(e){var t=e.selectedModule,n=e.modules,r=J(),i=Object(q.b)(),c=window.audioModules;return a.a.createElement(o.Fragment,null,t?0===t.inputs.length?null:a.a.createElement("div",{className:r.MenuHeader},"inputs"):null,t?t.inputs.map((function(e,o){var l=e.connectionID,u=e.connectedID,d=e.param,s=e.outputIndex,m=e.containerOutputChildID,p=e.containerInputChildID,f=n[u].name;return a.a.createElement("div",{className:r.Connection,key:u+d+"inp"+o,onClick:function(){i(X(u,t.id,l)),ie(c[m||u],c[p||t.id],d,s)}},"".concat(f).concat(m?" - ".concat(n[m].name):"").concat(0!==d.length?" - ".concat(d):""))})):null,t?0===t.outputs.length?null:a.a.createElement("div",{className:r.MenuHeader},"outputs"):null,t?t.outputs.map((function(e,o){var l=e.connectionID,u=e.connectedID,d=e.param,s=e.outputIndex,m=e.containerOutputChildID,p=e.containerInputChildID,f=n[u].name;return a.a.createElement("div",{className:r.Connection,key:u+d+"out"+o,onClick:function(){i(X(t.id,u,l)),ie(c[m||t.id],c[p||u],d,s)}},"".concat(f).concat(p?" - ".concat(n[p].name):"").concat(0!==d.length?" - ".concat(d):""))})):null)},le={fontSize:N.xsmall,padding:"1vmin"};var ue=function(e){var t=e.baseContainerID,n=e.selectedModule,r=Object(q.b)();return n?a.a.createElement(o.Fragment,null,window.fillContainerID===t||0===n.connectionInputs.length?null:a.a.createElement(He,{style:le,key:n.id+"inputSwitch",text:"mark as container input",initState:n.isContainerInput,onSwitch:function(e){r(e?{type:"MARK_CONTAINER_INPUT",id:window.highlightedID}:function(e){return{type:"UNMARK_CONTAINER_INPUT",id:e}}(window.highlightedID))}}),window.fillContainerID===t||0===n.connectionOutputs.length?null:a.a.createElement(He,{style:le,key:n.id+"outputSwitch",text:"mark as container output",initState:n.isContainerOutput,onSwitch:function(e){r(e?{type:"MARK_CONTAINER_OUTPUT",id:window.highlightedID}:function(e){return{type:"UNMARK_CONTAINER_OUTPUT",id:e}}(window.highlightedID))}})):null};var de=function(e){var t=e.selectedModule,n=window.audioModules,o=Object(q.b)();return a.a.createElement(ve,{style:{backgroundColor:D,width:"50%",fontSize:N.small},onClick:function(){t.inputs.forEach((function(e){var a=e.connectionID,r=e.connectedID,i=e.param,c=e.outputIndex,l=e.containerOutputChildID,u=e.containerInputChildID;o(X(r,t.id,a)),ie(n[l||r],n[u||t.id],i,c)})),t.outputs.forEach((function(e){var a=e.connectionID,r=e.connectedID,i=e.param,c=e.outputIndex,l=e.containerOutputChildID,u=e.containerInputChildID;o(X(t.id,r,a)),ie(n[l||t.id],n[u||r],i,c)})),o({type:"REMOVE_MODULE",id:window.highlightedID}),window.highlightedID=""}},"delete")};window.currSetHighlighted=function(){};var se=function(e){var t=e.mod,n=e.gridCol,r=e.gridRow,i=G(),l=Object(o.useState)(t.id===window.highlightedID),u=Object(c.a)(l,2),d=u[0],s=u[1],m=Object(o.useState)(!1),p=Object(c.a)(m,2),f=p[0],h=p[1];t.id===window.highlightedID&&(window.currSetHighlighted=s);var g={gridColumn:"".concat(n," / span 1"),gridRow:"".concat(r," / span 1"),borderStyle:d?"solid":"none"},w={gridColumn:"".concat(n," / span 1"),gridRow:"".concat(r," / span 1")},b=Object(M.b)({width:d?j.bigIconWidth:j.icon,height:d?j.bigIconHeight:j.icon,config:{tension:550,clamp:!0},onFrame:window.refreshArcherContainer}),v=Object(M.b)({zIndex:d?3:2,config:{duration:0}}),I=Object(M.b)({fontSize:d?N.medium:N.small,config:{tension:550,clamp:!0}}),O=Object(q.c)((function(e){return[e.modules,e.baseContainerID]})),D=Object(c.a)(O,2),C=D[0],y=D[1],x=Object(q.b)();return a.a.createElement(o.Fragment,null,a.a.createElement(M.a.div,{className:i.Icon,style:Object.assign(v,b,g),onDragOver:function(e){e.preventDefault()},onDrop:function(e){var n=e.dataTransfer.getData("id");if(n){if(C[n]){var o=e.dataTransfer.getData("fromRow"),a=e.dataTransfer.getData("fromCol");window.setFillIsExpanded(!1),x(K(n,t.row,t.col)),x(K(t.id,Number(o),Number(a))),window.setTimeout(window.refreshArcherContainer,100)}}else if(0===t.connectionInputs.length&&0===window.audioModules[t.id].connectingParamIDs.length)alert("mod cannot accept input");else{var r=e.dataTransfer.getData("fromID");r&&window.openConnectionMenu(r,t.id)}s(!1)},draggable:!0,onDragStart:function(e){e.dataTransfer.setData("id",t.id),e.dataTransfer.setData("fromRow","".concat(t.row)),e.dataTransfer.setData("fromCol","".concat(t.col)),window.setFillIsExpanded(!0)},onDragEnd:function(){window.setFillIsExpanded(!1)},onClick:function(e){e.stopPropagation&&e.stopPropagation(),t.id===window.highlightedID?(s(!1),window.highlightedID="",window.currSetHighlighted=function(e){}):(s(!0),window.highlightedID=t.id,window.currSetHighlighted(!1),window.currSetHighlighted=s)}},0===t.connectionOutputs.length?null:a.a.createElement("div",{className:i.IconConnector,draggable:!0,onDragStart:function(e){e.stopPropagation(),e.dataTransfer.setData("fromID",t.id)}}),a.a.createElement(M.a.div,{className:i.IconName,style:I,onClick:function(e){d&&(e.stopPropagation(),window.openRenameMenu())}},t.name),d?a.a.createElement("div",{onClick:function(e){return e.stopPropagation()},style:{width:j.bigIconWidth,maxHeight:j.bigIconHeight,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",overflowY:"scroll",overflowX:"hidden"}},a.a.createElement(ce,{selectedModule:t,modules:C}),a.a.createElement(ae,{audioModule:window.audioModules[t.id],selectedModule:t,reRenderIcon:function(){h(!f)}}),a.a.createElement(ue,{baseContainerID:y,selectedModule:t}),a.a.createElement(de,{selectedModule:t})):null),a.a.createElement(M.a.div,{className:i.ArcherElement,style:Object.assign({},b,w)},a.a.createElement("div",{style:{gridColumn:"".concat(1," / span 1"),gridRow:"".concat(1," / span 1")}},a.a.createElement(Q.ArcherElement,{id:t.id+" input"},a.a.createElement("div",{style:{width:"10px",height:"10px"}}))),a.a.createElement("div",{style:{gridColumn:"".concat(1," / span 1"),gridRow:"".concat(3," / span 1")}},a.a.createElement(Q.ArcherElement,{id:t.id+" controls"},a.a.createElement("div",{style:{width:"10px",height:"10px"}}))),a.a.createElement("div",{style:{gridColumn:"".concat(3," / span 1"),gridRow:"".concat(1," / span 1")}},a.a.createElement(Q.ArcherElement,{id:t.id+" output",relations:t.outputs.map((function(e){var t=e.connectedID,n=e.param;return{targetId:""===n?t+" input":t+" controls",targetAnchor:"left",sourceAnchor:"right",style:{strokeColor:""===n?"red":"blue",strokeWidth:1}}}))},a.a.createElement("div",{style:{width:"10px",height:"10px"}})))))};var me=Object(l.a)({DropSquare:{width:j.iconGrid,height:j.iconGrid,borderStyle:"solid",borderRadius:"10px",zIndex:1}});var pe=function(e){var t=e.row,n=e.col,r=me(),i=Object(q.b)(),l=Object(q.c)((function(e){return{modules:e.modules}})).modules,u=Object(o.useState)(!1),d=Object(c.a)(u,2),s=d[0],m=d[1],p={gridColumn:"".concat(n+1," / span 1"),gridRow:"".concat(t+1," / span 1"),borderColor:s?I:"transparent"};return a.a.createElement("div",{className:r.DropSquare,style:p,onDragOver:function(e){e.preventDefault()},onDragEnter:function(){m(!0)},onDragLeave:function(){m(!1)},onDrop:function(e){var o=e.dataTransfer.getData("id"),a=l[window.fillContainerID],r=a.childModules.concat(a.childModules),c=l[o],u=function(e,t,n,o){for(var a=0;a<n.length;a++){var r=o[n[a]];if(r.row===e&&r.col===t)return r.id}return!1}(t,n,r,l);if(c)if(u){var d=e.dataTransfer.getData("fromRow"),s=e.dataTransfer.getData("fromCol");m(!1),window.setFillIsExpanded(!1),i(K(o,t,n)),i(K(u,Number(d),Number(s))),window.setTimeout(window.refreshArcherContainer,1)}else m(!1),window.setFillIsExpanded(!1),i(K(o,t,n)),window.setTimeout(window.refreshArcherContainer,1);else if(!u){var p=e.dataTransfer.getData("moduleType"),f=e.dataTransfer.getData("name");m(!1),window.addModule(o,f,window.fillContainerID,p,i,t,n),window.setFillIsExpanded(!1)}}})};var fe=function(){var e=G(),t=Object(o.useState)(!1),n=Object(c.a)(t,2),r=n[0],i=n[1];window.setFillIsExpanded=i;var l=Object(o.useState)(!1),u=Object(c.a)(l,2),d=u[0],s=u[1];window.reRenderFillContainer=function(){s(!d)};var m,p=Object(q.c)((function(e){return{modules:e.modules,baseContainerID:e.baseContainerID}})),f=p.modules,h=p.baseContainerID,g=f[window.fillContainerID],w=function(e,t){var n=0,o=0;return e.forEach((function(e){var a=t[e];a.row>n&&(n=a.row),a.col>o&&(o=a.col)})),{maxRow:n,maxCol:o}}(g.childModules,f),b=w.maxRow,v=w.maxCol,I=0===g.childModules.length;m=I?{gridTemplateRows:"repeat(".concat(1,", ","auto",")"),gridTemplateColumns:"repeat(".concat(1,", ","auto",")")}:{gridTemplateRows:"repeat(".concat(r?b+2:b+1,", ","auto",")"),gridTemplateColumns:"repeat(".concat(r?v+2:v+1,", ","auto",")")};var O=Object(o.useRef)(null);return window.refreshArcherContainer=function(){var e;null===(e=O.current)||void 0===e||e.refreshScreen()},a.a.createElement("div",{className:e.FillBounder},a.a.createElement("div",{className:e.FillHeaderBounder},a.a.createElement("div",{className:e.FillHeader,style:{width:"".concat(g.name.length/2,"em")},onClick:function(e){e.stopPropagation(),window.highlightedID=g.id}},g.name),g.id===h?null:a.a.createElement(ve,{style:{height:".7em"},onClick:function(){window.fillContainerID=g.parentID,window.reRenderFillContainer(),window.highlightedID=""}},a.a.createElement("div",null,"back"))),a.a.createElement(Q.ArcherContainer,{ref:O,svgContainerStyle:{zIndex:-1},strokeWidth:2,arrowLength:0},a.a.createElement("div",{className:e.Fill,style:m,onClick:function(){window.highlightedID="",window.currSetHighlighted(!1),window.currSetHighlighted=function(){}}},I?a.a.createElement(pe,{row:0,col:0}):U(0,r?b+2:b+1).map((function(e){return U(0,r?v+2:v+1).map((function(t){return a.a.createElement(pe,{key:"".concat(e," ").concat(t),row:e,col:t})}))})).flat(),g.childModules.map((function(e){var t=f[e];return a.a.createElement(se,{key:t.id,mod:t,gridRow:t.row+1,gridCol:t.col+1})})))))};var he=Object(l.a)({CenterMenuBounder:{backgroundColor:"rgba(0,0,0,0.7)",position:"absolute",top:0,left:0,width:"100vw",height:"100vh",zIndex:100},CenterMenu:{backgroundColor:h,position:"absolute",top:"50vh",left:"50vw",transform:"translate(-50%, calc(-50% - 50px))",display:"flex",flexDirection:"column",alignItems:"center",borderRadius:"2vmin",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",minWidth:"15vw",padding:"1vmin 2vmin 2vmin 2vmin",border:"1px solid white",zIndex:101},Header:{padding:"1vmin 2vmin",margin:"0vmin 0vmin 2vmin 0vmin",borderColor:"white",borderStyle:"none none solid none",fontSize:N.large}});var ge=function(e){var t=e.children,n=e.header,o=e.onClose,r=he();return a.a.createElement("div",{className:r.CenterMenuBounder,onClick:function(e){e.stopPropagation(),o()}},a.a.createElement("div",{className:r.CenterMenu,onClick:function(e){e.stopPropagation()}},a.a.createElement("div",{className:r.Header},n),t))},we=(Object(l.a)({TestingArea:{backgroundColor:"black",position:"absolute",top:"45vh",left:"25vw",width:"45vw",height:"50vh",display:"flex",flexDirection:"column",zIndex:150},ButtonDiv:{display:"flex",flexFlow:"row wrap"},Button:{margin:"2vmin",padding:"1vmin",display:"flex",alignItems:"center",justifyContent:"center","&:hover":{cursor:"pointer"}}}),new(0,window.AudioContext));var be=Object(l.a)({Button:{backgroundColor:O,borderColor:"transparent",borderRadius:"1vmin",borderStyle:"solid","&:active":{borderColor:"transparent"},"&:hover":{cursor:"pointer",borderColor:"white"},display:"flex",alignItems:"center",justifyContent:"center",padding:"1vmin",margin:"1vmin",textAlign:"center"}});var ve=function(e){var t=e.onClick,n=e.children,o=e.style,r=be();return a.a.createElement("div",{className:r.Button,onClick:t,style:o},n)},Ie=n(3),Oe=n(1),De=["sine","square","triangle","sawtooth"];var Ce=function(){var e=we.createOscillator(),t={"set type":{controlType:"TYPE",paramID:"type"},"set frequency":{controlType:R,paramID:"frequency",value:e.frequency.value,range:[0,2e4,1]},"set detune":{controlType:R,paramID:"detune"}},n={"set type":function(t){e.type=t},"set frequency":function(n){t["set frequency"].value=Number(n),e.frequency.value=Number(n)},"set detune":function(t){e.detune.value=Number(t)},kill:function(){e.stop()}};return e.start(),{audioNode:e,typeTypes:De,connectingParamIDs:["frequency","detune"],controlData:t,controlSetFuncs:n}};var ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=we.createGain();t.gain.value=e;var n=["gain"],o={"set gain":{controlType:R,paramID:"gain",value:0,range:[-1e4,1e4,1]},"set fine gain":{controlType:R,paramID:"gain",value:0,range:[-1,1,.01]}};function a(){t.gain.value=o["set gain"].value+o["set fine gain"].value}var r={"set gain":function(e){o["set gain"].value=Number(e),a()},"set fine gain":function(e){o["set fine gain"].value=Number(e),a()}};return{audioNode:t,connectingParamIDs:n,controlData:o,controlSetFuncs:r}};var xe=function(){we.resume();var e=we.createGain();e.connect(we.destination);var t={"set master gain":{controlType:R,paramID:"gain",value:1,range:[0,5,.1]},resume:{controlType:"BUTTON",paramID:"n/a"},suspend:{controlType:"BUTTON",paramID:"n/a"}},n={"set master gain":function(n){t["set master gain"].value=Number(n),e.gain.value=Number(n)},resume:function(e){we.resume()},suspend:function(e){we.suspend()}};return{audioNode:e,connectingParamIDs:[],controlData:t,controlSetFuncs:n}},Ee=["lowpass","lowshelf","highpass","highshelf","allpass","bandpass","notch","peaking"];var je=function(){var e=we.createBiquadFilter(),t={"set type":function(t){e.type=t},"set frequency":function(t){e.frequency.value=Number(t)},"set detune":function(t){e.detune.value=Number(t)},"set Q":function(t){e.Q.value=Number(t)},"set gain":function(t){e.gain.value=Number(t)}};return{audioNode:e,typeTypes:Ee,connectingParamIDs:["frequency","detune","Q","gain"],controlData:{"set type":{controlType:"TYPE",paramID:"type"},"set frequency":{controlType:R,paramID:"frequency"},"set detune":{controlType:R,paramID:"detune"},"set Q":{controlType:R,paramID:"Q"},"set gain":{controlType:R,paramID:"gain"}},controlSetFuncs:t}};var Ne=function(){var e=we.createDynamicsCompressor(),t={"set threshold":function(t){e.threshold.value=Number(t)},"set knee":function(t){e.knee.value=Number(t)},"set ratio":function(t){e.ratio.value=Number(t)},"set attack":function(t){e.attack.value=Number(t)},"set release":function(t){e.release.value=Number(t)}};return{audioNode:e,connectingParamIDs:["threshold","knee","ratio","attack","release"],controlData:{"set threshold":{controlType:R,paramID:"threshold"},"set knee":{controlType:R,paramID:"knee"},"set ratio":{controlType:R,paramID:"ratio"},"set attack":{controlType:R,paramID:"attack"},"set release":{controlType:R,paramID:"release"}},controlSetFuncs:t}};var Te=function(){var e=we.createStereoPanner(),t={"set pan":function(t){e.pan.value=Number(t)}};return{audioNode:e,connectingParamIDs:["pan"],controlData:{"set pan":{controlType:R,paramID:"pan"}},controlSetFuncs:t}};var Se=function(){var e=we.createDelay(),t={"set delay time":{controlType:R,paramID:"delayTime",value:e.delayTime.value,range:[0,1,.01]}},n={"set delay time":function(n){t["set delay time"].value=Number(n),e.delayTime.value=Number(n)}};return{audioNode:e,connectingParamIDs:["delayTime"],controlData:t,controlSetFuncs:n}},Me=["no ramp","linear","exponential"];var ke=function(){var e=we.createConstantSource();e.offset.value=0;var t={"set value":{controlType:R,paramID:"offset",value:0},"set ramp":{controlType:"TYPE",paramID:"n/a",value:"no ramp"},"set ramp length":{controlType:R,paramID:"n/a",value:1,range:[0,1e4,.01]},kill:{controlType:"BUTTON",paramID:"n/a"}},n={"no ramp":function(n){t["set value"].value=Number(n),e.offset.value=Number(n)},linear:function(n){t["set value"].value=Number(n),e.offset.linearRampToValueAtTime(Number(n),we.currentTime+t["set ramp length"].value)},exponential:function(n){t["set value"].value=Number(n),e.offset.exponentialRampToValueAtTime(Number(n),we.currentTime+t["set ramp length"].value)}},o={"set value":function(e){n[t["set ramp"].value](e)},"set ramp":function(e){t["set ramp"].value=e},"set ramp length":function(e){t["set ramp length"].value=Number(e)},kill:function(){e.stop()}};return e.start(),{audioNode:e,connectingParamIDs:["offset"],controlData:t,controlSetFuncs:o,typeTypes:Me}};var Re=function(e){if(e.current){var t={"set file":function(t){e.current.src=t}};return{audioNode:we.createMediaElementSource(e.current),ref:e,connectingParamIDs:[],controlData:{"set file":{controlType:"FILE",paramID:"n/a"}},controlSetFuncs:t}}return null};var Ae=function(e){navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1,latency:0}}).then((function(t){var n=we.createMediaStreamSource(t),o=we.createChannelSplitter(2);n.connect(o);var a={"number of channels: ":{controlType:"INFO",paramID:"n/a",value:0},mute:{controlType:"SWITCH",paramID:"n/a",value:!1}},r={"number of channels: ":function(e){a["number of channels: "].value=n.channelCount},mute:function(e){var n="true"===e;a.mute.value=n,t.getAudioTracks()[0].enabled=n}},i={audioNode:o,connectingParamIDs:[],controlData:a,controlSetFuncs:r};window.audioModules=Object(Oe.a)(Object(Oe.a)({},window.audioModules),{},Object(Ie.a)({},e,i))}))};var Pe=function(e){return{connectingParamIDs:[],controlData:{open:{controlType:"BUTTON",paramID:"n/a"}},controlSetFuncs:{open:function(){window.fillContainerID=e,window.reRenderFillContainer(),window.highlightedID=""}}}};var Fe=function(e){var t=e.id,n=Object(o.useRef)(null);return Object(o.useEffect)((function(){if(!window.audioModules[t]){var e=Re(n);e&&(window.audioModules=Object(Oe.a)(Object(Oe.a)({},window.audioModules),{},Object(Ie.a)({},t,e)))}})),a.a.createElement("audio",{ref:n,autoPlay:!0})};window.addAudioTag=function(e){window.audioTags[e]={id:e,srcName:""}},window.audioTags={};var Ue=function(){var e=Object(o.useState)(!1),t=Object(c.a)(e,2),n=t[0],r=t[1];window.reRenderAudioTags=function(){r(!n)};var i=Object.keys(window.audioTags);return a.a.createElement(o.Fragment,null,i.map((function(e){return a.a.createElement(Fe,{key:e,id:e})})))},_e=Object(l.a)({Bounder:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-around",borderRadius:"15px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",userSelect:"none",margin:"10px","&:hover":{cursor:"pointer"}},Switch:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",justifySelf:"flex-end",borderRadius:"15px",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",userSelect:"none",margin:"10px"}});var He=function(e){var t=e.text,n=e.onSwitch,r=e.initState,i=e.style,l=Object(o.useState)(r),u=Object(c.a)(l,2),s=u[0],m=u[1],p=_e(),f=Object(M.b)({cx:s?"65":"25",fill:s?"green":"red",config:{tension:250}});return a.a.createElement("div",{className:p.Bounder,style:i},t,a.a.createElement("svg",{onClick:function(){n(!s),m(!s)},width:"90",height:"30"},a.a.createElement("rect",{width:"50",height:"20",x:"20",y:"5",rx:"10",ry:"10",fill:d}),a.a.createElement(M.a.circle,{cx:f.cx,cy:"15",r:"15",fill:f.fill})))},Le={};var ze=function(e){var t=e.fromID,n=e.toID,r=e.onClose,i=window.audioModules,l=Object(o.useState)(0),u=Object(c.a)(l,2),d=u[0],s=u[1],m=Object(o.useState)(0),p=Object(c.a)(m,2),f=p[0],h=p[1],g=Object(o.useState)(0),w=Object(c.a)(g,2),b=w[0],v=w[1],I=Object(o.useState)(0),O=Object(c.a)(I,2),D=O[0],C=O[1],y=Object(q.b)(),x=Object(q.c)((function(e){return e.modules})),E=x[t],j=x[n],N=E.connectionOutputs.length>1?"CHOOSE_OUTPUT":j.connectionInputs.length>1?"CHOOSE_INPUT":"CONNECT_TO",T=Object(o.useState)(N),S=Object(c.a)(T,2),M=S[0],k=S[1],R="CONTAINER"===E.moduleType,A="CONTAINER"===j.moduleType;return a.a.createElement(o.Fragment,null,"CHOOSE_OUTPUT"===M?a.a.createElement(ge,{header:"choose output",onClose:r},E.connectionOutputs.map((function(e,o){return a.a.createElement(ve,{style:Le,key:t+n+e,onClick:function(e){e.stopPropagation(),R?v(o):s(o),j.connectionInputs.length>1?k("CHOOSE_INPUT"):k("CONNECT_TO")}},R?x[e].name:e)}))):"CHOOSE_INPUT"===M?a.a.createElement(ge,{header:"choose input",onClose:r},j.connectionInputs.map((function(e,o){return a.a.createElement(ve,{style:Le,key:t+n+e,onClick:function(e){e.stopPropagation(),A?C(o):h(o),k("CONNECT_TO")}},A?x[e].name:e)}))):"CONNECT_TO"===M?a.a.createElement(ge,{header:"connect ".concat(R?E.name+" - "+x[E.connectionOutputs[d]].name:E.name," to ").concat(A?j.name+" - "+x[j.connectionInputs[f]].name:j.name),onClose:r},(A?0===x[j.connectionInputs[f]].connectionInputs.length:0===j.connectionInputs.length)?null:a.a.createElement(ve,{style:Le,onClick:function(){re(R?i[E.connectionOutputs[b]]:i[E.id],A?i[j.connectionInputs[D]]:i[j.id],"",d,f),y(V(t,n,"",d,f,R?E.connectionOutputs[b]:void 0,A?j.connectionInputs[D]:void 0)),r()}},"module"),A?0===i[j.connectionInputs[f]].connectingParamIDs.length?null:a.a.createElement(ve,{style:Le,onClick:function(e){e.stopPropagation(),k("CHOOSE_PARAM")}},"params"):0===i[n].connectingParamIDs.length?null:a.a.createElement(ve,{style:Le,onClick:function(e){e.stopPropagation(),k("CHOOSE_PARAM")}},"params")):"CHOOSE_PARAM"===M?a.a.createElement(ge,{header:"props",onClose:r},(A?i[j.connectionInputs[D]]:i[n]).connectingParamIDs.map((function(e,o){return a.a.createElement(ve,{style:Le,key:t+n+o,onClick:function(){re(R?i[E.connectionOutputs[b]]:i[E.id],A?i[j.connectionInputs[D]]:i[j.id],e,d,f),y(V(t,n,e,d,f,R?E.connectionOutputs[b]:void 0,A?j.connectionInputs[D]:void 0)),r()}},e)}))):null)},Be=Object(l.a)({CMInputBounder:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},CenterMenuInput:{backgroundColor:d,color:"white",height:"2vmin",padding:"1vmin",margin:"1.5vmin .75vmin 1.5vmin 1.5vmin",borderStyle:"none",borderRadius:"1vmin",fontSize:N.small,width:"23vmin","&:hover":{cursor:"text"}},InputSubmit:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:d,height:"2vmin",padding:"1vmin",margin:"1.5vmin 1.5vmin 1.5vmin 0.75vmin",borderRadius:"1vmin","&:hover":{cursor:"pointer"},fontSize:N.small},Error:{backgroundColor:C,width:"90%",color:"white",fontSize:N.small,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"1vmin",padding:"1vmin 0vmin",marginBottom:"1vmin"}});var We=function(e){var t,n=e.onClose,r=Be(),i=Object(o.useRef)(null),l=Object(q.c)((function(e){return e.modules})),u=Object(q.b)(),d=Object(o.useState)(!1),s=Object(c.a)(d,2),m=s[0],p=s[1];function f(){if(i&&i.current){var e=i.current.value;0===e.length?p(!0):(u(function(e,t){return{type:"RENAME_MODULE",id:e,newName:t}}(window.highlightedID,e)),n())}}return a.a.createElement(ge,{header:"rename",onClose:n},a.a.createElement("div",{className:r.CMInputBounder},a.a.createElement("input",{className:r.CenterMenuInput,placeholder:null===(t=l[window.highlightedID])||void 0===t?void 0:t.name,onKeyUp:function(e){13===e.keyCode?f():27===e.keyCode&&n()},ref:i,autoFocus:!0}),a.a.createElement("div",{className:r.InputSubmit,onClick:function(){f()}},"enter")),m?a.a.createElement("div",{className:r.Error},"please enter a name"):null)};var Ge=Object(l.a)({PointerLayer:{width:"100vw",height:"100vh",position:"absolute",top:0,left:0,zIndex:300}});var qe=function(e){var t=e.pointerLayerData,n=e.resetPointerLayerData,o=Ge(),r=t.pointerId,i=t.onPointerMove,c=t.onPointerUp;return a.a.createElement("div",{className:o.PointerLayer,onPointerMove:function(e){e.pointerId===r&&i(e)},onPointerUp:function(e){e.pointerId===r&&(c(e),n())}})};var Ye=function(){return function(e,t,n,o,a,r,i){switch(o){case"OSCILLATOR":window.audioModules=Object(Oe.a)(Object(Oe.a)({},window.audioModules),{},Object(Ie.a)({},e,Ce())),a(Y(e,t,o,n,r,i,[],["0"]));break;case"GAIN":window.audioModules=Object(Oe.a)(Object(Oe.a)({},window.audioModules),{},Object(Ie.a)({},e,ye())),a(Y(e,t,o,n,r,i,["0"],["0"]));break;case"OUTPUT":window.audioModules=Object(Oe.a)(Object(Oe.a)({},window.audioModules),{},Object(Ie.a)({},e,xe())),a(Y(e,t,o,n,r,i,["0"],[]));break;case"AUTOFILTER":window.audioModules=Object(Oe.a)(Object(Oe.a)({},window.audioModules),{},Object(Ie.a)({},e,je())),a(Y(e,t,o,n,r,i,["0"],["0"]));break;case"KOMPRESSOR":window.audioModules=Object(Oe.a)(Object(Oe.a)({},window.audioModules),{},Object(Ie.a)({},e,Ne())),a(Y(e,t,o,n,r,i,["0"],["0"]));break;case"STEREO_PANNER":window.audioModules=Object(Oe.a)(Object(Oe.a)({},window.audioModules),{},Object(Ie.a)({},e,Te())),a(Y(e,t,o,n,r,i,["0"],["0"]));break;case"SIGNAL_DELAY":window.audioModules=Object(Oe.a)(Object(Oe.a)({},window.audioModules),{},Object(Ie.a)({},e,Se())),a(Y(e,t,o,n,r,i,["0"],["0"]));break;case"CONSTANT":window.audioModules=Object(Oe.a)(Object(Oe.a)({},window.audioModules),{},Object(Ie.a)({},e,ke())),a(Y(e,t,o,n,r,i,[],["0"]));break;case"MEDIA_ELEMENT":window.addAudioTag(e),window.reRenderAudioTags(),a(Y(e,t,o,n,r,i,[],["0"]));break;case"LINE_IN":Ae(e),a(Y(e,t,o,n,r,i,[],["0 (L)","1 (R)"]));break;case"CONTAINER":window.audioModules=Object(Oe.a)(Object(Oe.a)({},window.audioModules),{},Object(Ie.a)({},e,Pe(e))),a(Y(e,t,o,n,r,i,[],[]))}}};function Ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{isOpen:e,fromID:t,toID:n}}function Ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return{isOpen:e,pointerId:t,onPointerMove:n,onPointerUp:o}}window.highlightedID="project",window.fillContainerID="project",window.audioModules={},window.addModule=Ye();var Xe=function(){var e=u(),t=Object(o.useState)(Ke(!1)),n=Object(c.a)(t,2),r=n[0],i=n[1];window.openConnectionMenu=function(e,t){i(Ke(!0,e,t))};var l=Object(o.useState)(Ve(!1)),d=Object(c.a)(l,2),s=d[0],m=d[1];window.openPointerLayer=function(e,t,n){m(Ve(!0,e,t,n))};var p=Object(o.useState)(!1),f=Object(c.a)(p,2),h=f[0],g=f[1];return window.openRenameMenu=function(){g(!0)},a.a.createElement("div",{className:e.Bounder},a.a.createElement("div",{className:e.ModuleViewBounder},a.a.createElement(fe,null)),a.a.createElement(W,null),a.a.createElement(Ue,null),r.isOpen?a.a.createElement(ze,{fromID:r.fromID,toID:r.toID,onClose:function(){i(Ke(!1))}}):null,s.isOpen?a.a.createElement(qe,{pointerLayerData:s,resetPointerLayerData:function(){m(Ve(!1))}}):null,h?a.a.createElement(We,{onClose:function(){g(!1)}}):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qe=n(11),Je=n(21),$e=n(8),Ze=function(e,t){var n,o,a=t.id,r=t.name,i=t.moduleType,c=t.row,l=t.col,u=t.parentID,d=t.connectionInputs,s=t.connectionOutputs;switch(i){case"CONTAINER":return Object.assign({},e,(n={},Object(Ie.a)(n,a,{id:a,name:r,row:c,col:l,parentID:u,moduleType:i,connectionInputs:d,connectionOutputs:s,inputs:[],outputs:[],childModules:[],isBaseContainer:!1,isContainerInput:!1,isContainerOutput:!1}),Object(Ie.a)(n,u,Object(Oe.a)(Object(Oe.a)({},e[u]),{},{childModules:[].concat(Object($e.a)(e[u].childModules),[a])})),n));default:return Object.assign({},e,(o={},Object(Ie.a)(o,a,{id:a,name:r,row:c,col:l,parentID:u,moduleType:i,connectionInputs:d,connectionOutputs:s,isContainerInput:!1,isContainerOutput:!1,inputs:[],outputs:[]}),Object(Ie.a)(o,u,Object(Oe.a)(Object(Oe.a)({},e[u]),{},{childModules:[].concat(Object($e.a)(e[u].childModules),[a])})),o))}},et=function(e,t){var n=t.id,o=e[n].parentID,a=Object.fromEntries(Object.entries(e).filter((function(e){return e[0]!==n})));return Object.assign({},a,Object.fromEntries(Object.entries(a).map((function(e){return[e[0],Object(Oe.a)(Object(Oe.a)({},e[1]),{},{inputs:e[1].inputs.filter((function(e){return e.connectedID!==n})),outputs:e[1].outputs.filter((function(e){return e.connectedID!==n}))})]}))),Object(Ie.a)({},o,Object(Oe.a)(Object(Oe.a)({},e[o]),{},{childModules:e[o].childModules.filter((function(e){return e!==n}))})))},tt=function(e,t){var n=t.id,o=t.newRow,a=t.newCol;return Object.assign({},e,Object(Ie.a)({},n,Object(Oe.a)(Object(Oe.a)({},e[n]),{},{row:o,col:a})))},nt=function(e,t){var n=t.id,o=t.newName;return Object.assign({},e,Object(Ie.a)({},n,Object(Oe.a)(Object(Oe.a)({},e[n]),{},{name:o})))};var ot=function(e,t){var n,o=t.fromID,a=t.toID,r=t.param,i=t.outputIndex,c=t.inputIndex,l=t.containerOutputChildID,u=t.containerInputChildID,d=function(e,t,n,o,a){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";return e+t+n+o+a+r+i}(o,a,r,i,c,l,u);return Object.assign({},e,(n={},Object(Ie.a)(n,a,Object(Oe.a)(Object(Oe.a)({},e[a]),{},{inputs:[].concat(Object($e.a)(e[a].inputs),[{connectionID:d,connectedID:o,param:r,outputIndex:i,inputIndex:c,containerOutputChildID:l,containerInputChildID:u}])})),Object(Ie.a)(n,o,Object(Oe.a)(Object(Oe.a)({},e[o]),{},{outputs:[].concat(Object($e.a)(e[o].outputs),[{connectionID:d,connectedID:a,param:r,outputIndex:i,inputIndex:c,containerOutputChildID:l,containerInputChildID:u}])})),n))},at=function(e,t){var n,o=t.fromID,a=t.toID,r=t.connectionID;return Object.assign({},e,(n={},Object(Ie.a)(n,a,Object(Oe.a)(Object(Oe.a)({},e[a]),{},{inputs:e[a].inputs.filter((function(e){return e.connectionID!==r}))})),Object(Ie.a)(n,o,Object(Oe.a)(Object(Oe.a)({},e[o]),{},{outputs:e[o].outputs.filter((function(e){return e.connectionID!==r}))})),n))},rt=function(e,t){var n,o=t.id,a=e[o].parentID;return Object.assign({},e,(n={},Object(Ie.a)(n,o,Object(Oe.a)(Object(Oe.a)({},e[o]),{},{isContainerInput:!0})),Object(Ie.a)(n,a,Object(Oe.a)(Object(Oe.a)({},e[a]),{},{connectionInputs:[].concat(Object($e.a)(e[a].connectionInputs),[o])})),n))},it=function(e,t){var n,o=t.id,a=e[o].parentID;return Object.assign({},e,(n={},Object(Ie.a)(n,o,Object(Oe.a)(Object(Oe.a)({},e[o]),{},{isContainerInput:!1})),Object(Ie.a)(n,a,Object(Oe.a)(Object(Oe.a)({},e[a]),{},{connectionInputs:e[a].connectionInputs.filter((function(e){return e!==o}))})),n))},ct=function(e,t){var n,o=t.id,a=e[o].parentID;return Object.assign({},e,(n={},Object(Ie.a)(n,o,Object(Oe.a)(Object(Oe.a)({},e[o]),{},{isContainerOutput:!0})),Object(Ie.a)(n,a,Object(Oe.a)(Object(Oe.a)({},e[a]),{},{connectionOutputs:[].concat(Object($e.a)(e[a].connectionOutputs),[o])})),n))},lt=function(e,t){var n,o=t.id,a=e[o].parentID;return Object.assign({},e,(n={},Object(Ie.a)(n,o,Object(Oe.a)(Object(Oe.a)({},e[o]),{},{isContainerInput:!1})),Object(Ie.a)(n,a,Object(Oe.a)(Object(Oe.a)({},e[a]),{},{connectionOutputs:e[a].connectionOutputs.filter((function(e){return e!==o}))})),n))},ut={project:{id:"project",name:"project",row:0,col:0,moduleType:"CONTAINER",connectionInputs:[],connectionOutputs:[],inputs:[],outputs:[],parentID:null,childModules:[],isBaseContainer:!0,isContainerInput:!1,isContainerOutput:!1}},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MODULE":return Ze(e,t);case"REMOVE_MODULE":return et(e,t);case"MOVE_MODULE":return tt(e,t);case"RENAME_MODULE":return nt(e,t);case"ADD_CONNECTION":return ot(e,t);case"REMOVE_CONNECTION":return at(e,t);case"MARK_CONTAINER_INPUT":return rt(e,t);case"UNMARK_CONTAINER_INPUT":return it(e,t);case"MARK_CONTAINER_OUTPUT":return ct(e,t);case"UNMARK_CONTAINER_OUTPUT":return lt(e,t);default:return e}},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"project",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DOWN_1_BASE":case"CHANGE_BASE":return t.newID;default:return e}},mt=Object(Qe.combineReducers)({modules:dt,baseContainerID:st}),pt=Object(Qe.createStore)(mt,Object(Je.composeWithDevTools)());i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(q.a,{store:pt},a.a.createElement(Xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.2de586c6.chunk.js.map